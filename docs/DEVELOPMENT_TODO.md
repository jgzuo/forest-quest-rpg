# Forest Quest RPG - 开发TODO清单

## 📋 总览

本文档详细列出开发 Forest Quest RPG 所需的所有步骤，按优先级和依赖关系排序。

---

## 🎯 阶段 0：项目准备（已完成）

### 基础设施
- [x] 创建项目目录结构
- [x] 编写游戏设计文档（GAME_DESIGN.md）
- [x] 整理素材清单（ASSETS_CHECKLIST.md）
- [x] 创建项目 README

---

## 🚀 阶段 1：Milestone 1 - 核心战斗系统

### 1.1 环境搭建
- [x] 复制游戏素材到 assets 目录
  - [x] 复制角色精灵图（英雄、鼹鼠、树妖）
  - [x] 复制环境瓦片地图
  - [x] 复制道具素材（宝石、金币）
- [x] 创建基础 HTML 结构
  - [x] 设置 Phaser.js 配置
  - [x] 创建游戏容器
  - [x] 添加基本 CSS 样式
- [x] 创建基础场景结构
  - [x] BootScene（预加载素材）
  - [x] GameScene（主游戏场景）

### 1.2 玩家角色实现
- [x] 创建 Player 类
  - [x] 定义角色属性（生命值、攻击力、移动速度）
  - [x] 实现键盘控制（WASD/方向键）
  - [x] 实现角色移动逻辑
  - [x] 添加边界检测
  - [x] 实现角色朝向（上下左右）
- [x] 实现角色动画
  - [x] 加载 idle 动画
  - [x] 加载 walk 动画
  - [x] 加载 attack 动画
  - [x] 实现动画切换逻辑
- [x] 实现攻击系统
  - [x] 空格键触发攻击
  - [x] 创建攻击判定区域
  - [x] 添加攻击冷却时间
  - [x] 播放攻击动画

### 1.3 敌人系统实现
- [x] 创建 Enemy 基类
  - [x] 定义敌人属性（生命值、攻击力、移动速度）
  - [x] 实现敌人AI（简单的追踪玩家）
  - [x] 实现敌人移动
- [x] 实现鼹鼠敌人
  - [x] 加载鼹鼠精灵图
  - [x] 设置鼹鼠属性（HP: 30, ATK: 5, 速度: 50）
  - [x] 实现鼹鼠行为模式
- [x] 实现树妖敌人
  - [x] 加载树妖精灵图
  - [x] 设置树妖属性（HP: 80, ATK: 12, 速度: 30）
  - [x] 实现树妖行为模式

### 1.4 战斗系统
- [x] 实现碰撞检测
  - [x] 玩家攻击 vs 敌人
  - [x] 敌人攻击 vs 玩家
- [x] 实现伤害系统
  - [x] 计算伤害值
  - [ ] 实现暴击系统（15%概率，2倍伤害）
  - [x] 显示伤害数字
- [x] 实现生命值系统
  - [x] 玩家生命值管理
  - [x] 敌人生命值管理
  - [x] 显示生命条
- [x] 实现敌人死亡
  - [x] 播放死亡动画
  - [x] 掉落道具（金币、宝石）
  - [x] 给予玩家经验值

### 1.5 UI系统
- [x] 创建生命条UI
  - [x] 玩家生命条
  - [ ] 敌人生命条
- [x] 创建经验条UI
  - [x] 显示当前经验值
  - [x] 显示升级进度
- [x] 创建状态面板
  - [x] 显示等级
  - [ ] 显示攻击力
  - [ ] 显示金币数量
- [x] 创建控制说明
  - [x] 显示操作提示
  - [x] 显示快捷键

### 1.6 测试与优化
- [ ] 测试玩家移动
- [ ] 测试攻击系统
- [ ] 测试敌人AI
- [ ] 测试战斗流程
- [ ] 性能优化（对象池）
- [ ] 修复Bug

**Milestone 1 完成标准：**
- ✅ 玩家可以移动和攻击
- ✅ 敌人会追踪并攻击玩家
- ✅ 伤害系统正常工作
- ✅ 击败敌人后掉落道具
- ✅ 游戏运行流畅（60 FPS）

---

## 🗺️ 阶段 2：Milestone 2 - 探索系统

### 2.1 瓦片地图系统
- [ ] 创建小镇地图
  - [ ] 使用 Tiled 编辑器创建地图
  - [ ] 导入草地瓦片
  - [ ] 添加建筑物和装饰
  - [ ] 设置碰撞层
- [ ] 创建森林地图
  - [ ] 使用森林瓦片
  - [ ] 添加树木、岩石、灌木
  - [ ] 设置行走区域
  - [ ] 添加瀑布特效
- [ ] 创建洞穴地图
  - [ ] 使用洞穴瓦片
  - [ ] 添加黑暗氛围
  - [ ] 设置陷阱区域

### 2.2 场景管理
- [ ] 实现场景切换系统
  - [ ] 创建场景管理器
  - [ ] 实现场景淡入淡出效果
  - [ ] 保存玩家位置和状态
- [ ] 实现小镇场景
  - [ ] 加载小镇地图
  - [ ] 添加NPC
  - [ ] 添加传送点
- [ ] 实现森林场景
  - [ ] 加载森林地图
  - [ ] 设置敌人刷新点
  - [ ] 添加宝箱
- [ ] 实现洞穴场景
  - [ ] 加载洞穴地图
  - [ ] 添加精英敌人
  - [ ] 设置Boss区域

### 2.3 NPC系统
- [ ] 创建NPC类
  - [ ] 定义NPC属性
  - [ ] 实现NPC对话系统
  - [ ] 添加对话选择
- [ ] 实现村长NPC
  - [ ] 发布主线任务
  - [ ] 提供背景故事
- [ ] 实现商人NPC
  - [ ] 打开商店界面
  - [ ] 购买和出售物品
- [ ] 实现普通村民
  - [ ] 提供提示和线索
  - [ ] 支线任务

### 2.4 道具系统
- [ ] 创建道具基类
  - [ ] 定义道具属性
  - [ ] 实现道具效果
- [ ] 实现宝石道具
  - [ ] 收集宝石
  - [ ] 显示收集进度
- [ ] 实现金币道具
  - [ ] 拾取金币
  - [ ] 金币计数
- [ ] 实现生命药水
  - [ ] 恢复生命值
  - [ ] 添加冷却时间

### 2.5 交互系统
- [ ] 实现交互提示
  - [ ] 显示"按E键交互"
  - [ ] 高亮可交互对象
- [ ] 实现对话系统
  - [ ] 显示对话框
  - [ ] 打字机效果
  - [ ] 点击继续
- [ ] 实现宝箱系统
  - [ ] 打开宝箱动画
  - [ ] 随机掉落道具

### 2.6 测试与优化
- [ ] 测试场景切换
- [ ] 测试NPC交互
- [ ] 测试道具拾取
- [ ] 优化地图加载性能
- [ ] 修复Bug

**Milestone 2 完成标准：**
- ✅ 可以在三个场景间自由切换
- ✅ NPC对话系统正常工作
- ✅ 可以拾取和使用道具
- ✅ 地图碰撞检测正确

---

## ⚔️ 阶段 3：Milestone 3 - RPG元素

### 3.1 经验值和升级系统
- [ ] 实现经验值系统
  - [ ] 击败敌人获得XP
  - [ ] XP曲线设计（每级需要更多XP）
  - [ ] 升级时增加属性
- [ ] 实现属性成长
  - [ ] 生命值提升（每级+10）
  - [ ] 攻击力提升（每级+3）
  - [ ] 显示升级提示
- [ ] 创建升级特效
  - [ ] 升级动画
  - [ ] 升级音效

### 3.2 商店系统
- [ ] 创建商店界面
  - [ ] 商品列表
  - [ ] 价格显示
  - [ ] 购买按钮
- [ ] 实现商品
  - [ ] 生命药水（50金币）
  - [ ] 攻击药水（100金币）
  - [ ] 武器升级（200金币）
- [ ] 实现交易逻辑
  - [ ] 检查金币是否足够
  - [ ] 扣除金币
  - [ ] 添加物品到库存

### 3.3 库存系统
- [ ] 创建库存UI
  - [ ] 物品格子
  - [ ] 物品图标
  - [ ] 物品数量
- [ ] 实现物品使用
  - [ ] 点击使用药水
  - [ ] 装备武器
  - [ ] 移除已使用的物品

### 3.4 战斗增强
- [ ] 添加暴击效果
  - [ ] 暴击音效
  - [ ] 暴击视觉特效
- [ ] 添加伤害数字飘字
  - [ ] 白色：普通伤害
  - [ ] 红色：暴击伤害
  - [ ] 黄色：玩家受伤
- [ ] 实现玩家受伤反馈
  - [ ] 受伤闪烁
  - [ ] 屏幕震动
  - [ ] 无敌时间

### 3.5 保存系统
- [ ] 实现本地存储
  - [ ] 保存玩家等级
  - [ ] 保存金币数量
  - [ ] 保存物品库存
  - [ ] 保存任务进度
- [ ] 创建保存/读取UI
  - [ ] 主菜单保存按钮
  - [ ] 游戏内保存点
  - [ ] 自动保存

### 3.6 测试与优化
- [ ] 测试升级系统
- [ ] 测试商店购买
- [ ] 测试库存管理
- [ ] 测试保存/读取
- [ ] 平衡性调整
- [ ] 修复Bug

**Milestone 3 完成标准：**
- ✅ 经验值和升级系统正常
- ✅ 可以购买和使用道具
- ✅ 可以保存和读取游戏进度
- ✅ 游戏平衡性良好

---

## 👑 阶段 4：Milestone 4 - 完整游戏

### 4.1 任务系统
- [ ] 创建任务管理器
  - [ ] 任务数据结构
  - [ ] 任务状态跟踪
- [ ] 实现主线任务
  - [ ] 任务1：击败10只鼹鼠
  - [ ] 任务2：收集3颗宝石
  - [ ] 任务3：击败树妖王
- [ ] 实现支线任务
  - [ ] 收集任务（收集金币）
  - [ ] 探索任务（发现秘密地点）
  - [ ] 挑战任务（无伤通关）
- [ ] 创建任务UI
  - [ ] 任务列表
  - [ ] 任务描述
  - [ ] 任务奖励

### 4.2 Boss战系统
- [ ] 创建Boss类
  - [ ] 树妖王属性（HP: 500, ATK: 25）
  - [ ] Boss行为AI
- [ ] 实现Boss技能
  - [ ] 普通攻击
  - [ ] 根须缠绕（束缚玩家）
  - [ ] 落石攻击（范围伤害）
  - [ ] 召唤树苗（召唤小怪）
- [ ] 实现多阶段战斗
  - [ ] 第一阶段：普通攻击
  - [ ] 第二阶段（50%HP）：使用技能
  - [ ] 第三阶段（20%HP）：狂暴模式
- [ ] 添加Boss血条UI
  - [ ] 大型血条显示
  - [ ] 阶段转换提示

### 4.3 关卡设计
- [ ] 设计游戏流程
  - [ ] 开始：小镇（对话村长）
  - [ ] 第一章：森林外围（击败鼹鼠）
  - [ ] 第二章：森林深处（对抗树妖）
  - [ ] 第三章：洞穴（Boss战）
- [ ] 添加过场动画
  - [ ] 游戏开始动画
  - [ ] 关卡过渡动画
  - [ ] 胜利动画
  - [ ] 失败动画
- [ ] 实现存档点
  - [ ] 小镇存档
  - [ ] 森林入口存档
  - [ ] 洞穴入口存档

### 4.4 音效和音乐
- [ ] 添加背景音乐
  - [ ] 小镇音乐（轻松愉快）
  - [ ] 森林音乐（神秘紧张）
  - [ ] 洞穴音乐（压抑恐怖）
  - [ ] Boss战音乐（激烈）
- [ ] 添加音效
  - [ ] 攻击音效
  - [ ] 受伤音效
  - [ ] 死亡音效
  - [ ] 拾取音效
  - [ ] 升级音效
  - [ ] UI音效
- [ ] 实现音量控制
  - [ ] 音乐开关
  - [ ] 音效开关
  - [ ] 音量滑块

### 4.5 最终打磨
- [ ] 添加开始动画
  - [ ] 游戏标题
  - [ ] 故事介绍
  - [ ] 淡入游戏
- [ ] 添加结局动画
  - [ ] 击败Boss后的动画
  - [ ] 森林恢复生机
  - [ ] 感谢游玩
- [ ] 添加成就系统
  - [ ] "初次胜利"（击败第一个敌人）
  - [ ] "宝石猎人"（收集所有宝石）
  - [ ] "森林守护者"（击败Boss）
  - [ ] "满级英雄"（达到10级）
- [ ] 添加重新开始功能
  - [ ] 游戏结束后重新开始
  - [ ] 保留成就和最高记录

### 4.6 测试与发布
- [ ] 完整游戏测试
  - [ ] 从头到尾通关
  - [ ] 测试所有任务
  - [ ] 测试所有系统
- [ ] 性能优化
  - [ ] 优化渲染性能
  - [ ] 减少内存占用
  - [ ] 优化加载时间
- [ ] 用户体验优化
  - [ ] 添加加载进度条
  - [ ] 添加暂停功能
  - [ ] 添加操作教程
- [ ] 编写游戏文档
  - [ ] 玩家手册
  - [ ] 攻略指南
  - [ ] 更新README
- [ ] 准备发布
  - [ ] 打包游戏资源
  - [ ] 部署到GitHub Pages
  - [ ] 创建演示视频

**Milestone 4 完成标准：**
- ✅ 完整的游戏流程（1-2小时通关）
- ✅ Boss战有挑战性但公平
- ✅ 音效和音乐增强体验
- ✅ 所有系统稳定无重大Bug
- ✅ 可以正式发布

---

## 🎯 优先级总结

### 第一周（核心战斗）
1. 环境搭建
2. 玩家角色实现
3. 敌人系统实现
4. 战斗系统
5. UI系统

### 第二周（探索系统）
1. 瓦片地图系统
2. 场景管理
3. NPC系统
4. 道具系统
5. 交互系统

### 第三周（RPG元素）
1. 经验值和升级系统
2. 商店系统
3. 库存系统
4. 战斗增强
5. 保存系统

### 第四周（完整游戏）
1. 任务系统
2. Boss战系统
3. 关卡设计
4. 音效和音乐
5. 最终打磨和发布

---

## 📊 进度跟踪

### 当前阶段：Milestone 3 - RPG元素（进行中）
**完成度：** █████░░░░ 60%

**已完成：**
- ✅ Milestone 1: 核心战斗系统（完成）
- ✅ Milestone 2: 探索系统（完成）
- 🔄 Milestone 3: RPG元素（进行中 - 80%）

**下一步：** 完善商店系统、添加动画优化、准备Milestone 4

---

## 🔧 开发工具推荐

### 游戏开发
- **Phaser.js 3.80+** - 游戏框架
- **Tiled** - 瓦片地图编辑器
- **Aseprite** - 像素画编辑器（可选）

### 调试工具
- **Chrome DevTools** - 浏览器调试
- **Phaser Inspector** - Phaser调试插件

### 素材工具
- **TexturePacker** - 精灵表打包工具（可选）
- **TinyPNG** - 图片压缩工具

---

## 📝 注意事项

1. **版本控制**：每个Milestone完成后提交代码
2. **备份**：定期备份游戏进度
3. **测试**：每完成一个功能立即测试
4. **文档**：及时更新开发文档
5. **性能**：注意对象池和内存管理

---

**清单版本：** 1.0
**最后更新：** 2026-01-22
**预计完成时间：** 2026-02-15
