# Forest Quest RPG - æˆ˜æ–—ç³»ç»Ÿå®Œæ•´æ–‡æ¡£

> **Version**: v1.9.8
> **Last Updated**: 2026-02-04
> **Author**: Claude Code with å·¦å‰‘å¹¿

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æ ¸å¿ƒç³»ç»Ÿè¯¦è§£](#æ ¸å¿ƒç³»ç»Ÿè¯¦è§£)
3. [é›†æˆæŒ‡å—](#é›†æˆæŒ‡å—)
4. [é…ç½®æ–‡ä»¶](#é…ç½®æ–‡ä»¶)
5. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)
6. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
7. [å¿«æ·é”®å‚è€ƒ](#å¿«æ·é”®å‚è€ƒ)

---

## ç³»ç»Ÿæ¦‚è¿°

Forest Quest RPG æˆ˜æ–—ç³»ç»Ÿç”± **8ä¸ªæ ¸å¿ƒæ¨¡å—** ç»„æˆï¼Œæä¾›å®Œæ•´çš„åŠ¨ä½œRPGæˆ˜æ–—ä½“éªŒï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Forest Quest RPG æˆ˜æ–—ç³»ç»Ÿ               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”Š éŸ³æ•ˆç³»ç»Ÿ    â”‚  ğŸ¬ ç›¸æœºç³»ç»Ÿ   â”‚  ğŸ¨ UI/UX     â”‚
â”‚  CombatAudio    â”‚  CombatCamera  â”‚  CombatStats   â”‚
â”‚  Manager        â”‚  System        â”‚  Panel         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¤– æ•ŒäººAI     â”‚  âš¡ è¿æ‹›ç³»ç»Ÿ   â”‚  ğŸŒŸ è£…å¤‡ç‰¹æ•ˆ   â”‚
â”‚  EnemyAI        â”‚  WeaponCombo   â”‚  Equipment     â”‚
â”‚                 â”‚  System        â”‚  Effects       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š æ•°æ®åˆ†æ   â”‚  ğŸ­ æ°›å›´ç³»ç»Ÿ   â”‚                  â”‚
â”‚  CombatData     â”‚  CombatAtmos   â”‚                  â”‚
â”‚  Analyzer       â”‚  phereSystem   â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç‰¹æ€§äº®ç‚¹

- **ğŸµ ç¨‹åºåŒ–éŸ³æ•ˆ**: æ— éœ€å¤–éƒ¨éŸ³é¢‘æ–‡ä»¶ï¼ŒWeb Audio APIå®æ—¶ç”Ÿæˆ
- **ğŸ“· ç”µå½±çº§ç›¸æœº**: éœ‡åŠ¨ã€æ…¢åŠ¨ä½œã€åŠ¨æ€è§†è§’
- **ğŸ“Š æ·±åº¦æ•°æ®**: å®æ—¶DPSã€ä¼¤å®³æ¥æºã€æˆ˜æ–—å†å²
- **âš¡ é«˜çº§è¿æ‹›**: æ­¦å™¨è¿æ‹›ã€ç¯å¢ƒè¿æ‹›ã€ç©ºä¸­è¿æ‹›
- **ğŸŒŸ è§†è§‰ç‰¹æ•ˆ**: ä¼ å¥‡æ‹–å°¾ã€å¥—è£…å¥–åŠ±ã€ç¥å™¨å…‰æ•ˆ
- **ğŸ­ æ²‰æµ¸æ°›å›´**: å¿ƒè·³éŸ³æ•ˆã€è¡€è¿¹æ®‹ç•™ã€ç²’å­é£æš´

---

## æ ¸å¿ƒç³»ç»Ÿè¯¦è§£

### 1. ğŸ”Š éŸ³æ•ˆç³»ç»Ÿ (CombatAudioManager)

**æ–‡ä»¶**: `src/utils/CombatAudioManager.js` (410è¡Œ)

#### åŠŸèƒ½ç‰¹æ€§

- âœ… 8ç§å…ƒç´ ä¸“å±éŸ³æ•ˆï¼ˆç«/å†°/é›·/æ¯’/å…‰/æš—/åœ°/é£ï¼‰
- âœ… è¿å‡»éŸ³æ•ˆ5çº§æ¸å¼ºç³»ç»Ÿ
- âœ… è¿å‡»é‡Œç¨‹ç¢‘éŸ³æ•ˆï¼ˆ10/15/20è¿å‡»ï¼‰
- âœ… 4ä¸ªæŠ€èƒ½éŸ³æ•ˆåé¦ˆ
- âœ… Bossæˆ˜3é˜¶æ®µéŸ³ä¹ç³»ç»Ÿ
- âœ… å®Œç¾æ ¼æŒ¡/é—ªé¿éŸ³æ•ˆ

#### APIç¤ºä¾‹

```javascript
// æ’­æ”¾å…ƒç´ éŸ³æ•ˆ
this.combatAudioManager.playElementSound('fire', 50);

// æ’­æ”¾è¿å‡»éŸ³æ•ˆ
this.combatAudioManager.playComboSound(15);

// æ’­æ”¾æŠ€èƒ½éŸ³æ•ˆ
this.combatAudioManager.playSkillSound('whirlwind_slash', 'cast');

// æ’­æ”¾BosséŸ³ä¹
this.combatAudioManager.playBossMusic('treant_boss', 2);

// æ’­æ”¾å®Œç¾æ ¼æŒ¡
this.combatAudioManager.playPerfectParry();
```

#### éŸ³æ•ˆé…ç½®

```javascript
// src/data/CombatConfig.js
AUDIO_CONFIG = {
    masterVolume: 0.5,
    sfxVolume: 0.6,
    musicVolume: 0.4,
    elements: {
        fire: { volume: 0.5, pitch: 1.0 },
        ice: { volume: 0.5, pitch: 1.0 },
        // ... å…¶ä»–å…ƒç´ 
    },
    combo: {
        tier1: { threshold: 5, volume: 0.3 },
        tier2: { threshold: 10, volume: 0.4 },
        // ... å…¶ä»–å±‚çº§
    }
};
```

---

### 2. ğŸ¬ ç›¸æœºç³»ç»Ÿ (CombatCameraSystem)

**æ–‡ä»¶**: `src/systems/CombatCameraSystem.js` (510è¡Œ)

#### åŠŸèƒ½ç‰¹æ€§

- âœ… ç›¸æœºéœ‡åŠ¨ï¼ˆæ™®é€š/æš´å‡»ä¸åŒå¼ºåº¦ï¼‰
- âœ… å¤§æ‹›æ…¢åŠ¨ä½œæ•ˆæœï¼ˆæ—¶é—´ç¼©æ”¾ï¼‰
- âœ… Bosså‡»æ€ç›¸æœºæ¨æ‹‰
- âœ… è¿å‡»åŠ¨æ€ç›¸æœºï¼ˆ5/10/15/20è¿å‡»ï¼‰
- âœ… æš´å‡»ç‰¹å†™ç¼©æ”¾

#### APIç¤ºä¾‹

```javascript
// ç›¸æœºéœ‡åŠ¨
this.combatCameraSystem.shake('normal', 0.005, 100);

// æ…¢åŠ¨ä½œ
this.combatCameraSystem.slowMotion(0.3, 500);

// ç›¸æœºç¼©æ”¾
this.combatCameraSystem.zoom(1.2, 300);

// Bossæ­»äº¡æ¼”å‡º
this.combatCameraSystem.playBossDeathCinematic();
```

#### ç‰¹æ•ˆé˜Ÿåˆ—

```javascript
// é“¾å¼ç‰¹æ•ˆ
this.combatCameraSystem.queueEffects([
    { type: 'shake', intensity: 0.01, duration: 100 },
    { type: 'zoom', scale: 1.2, duration: 150 },
    { type: 'slowMotion', factor: 0.5, duration: 300 }
]);
```

---

### 3. ğŸ¨ UI/UXæˆ˜æ–—ç•Œé¢ (CombatStatsPanel)

**æ–‡ä»¶**: `src/ui/CombatStatsPanel.js` (310è¡Œ)

#### åŠŸèƒ½ç‰¹æ€§

- âœ… å®æ—¶DPSè®¡ç®—ï¼ˆ10s/å½“å‰æˆ˜æ–—ï¼‰
- âœ… ä¼¤å®³åˆ†ç±»ç»Ÿè®¡ï¼ˆç‰©ç†/é­”æ³•/DoTï¼‰
- âœ… å‘½ä¸­ç‡ä¸æš´å‡»ç‡è¿½è¸ª
- âœ… æœ€å¤§è¿å‡»æ˜¾ç¤º
- âœ… ä¼¤å®³æ•°å­—é˜²å †å ç³»ç»Ÿ

#### APIç¤ºä¾‹

```javascript
// æ˜¾ç¤ºæˆ˜æ–—ç»Ÿè®¡é¢æ¿
this.combatStatsPanel.show();

// è®°å½•ä¼¤å®³
this.combatStatsPanel.recordDamage(100, 'physical', true);

// æ›´æ–°DPS
this.combatStatsPanel.updateDPS();

// åˆ‡æ¢æ˜¾ç¤º/éšè—
this.combatStatsPanel.toggle();
```

---

### 4. ğŸ¤– æ•ŒäººAIç³»ç»Ÿ (EnemyAI)

**æ–‡ä»¶**: `src/systems/EnemyAI.js` (430è¡Œ)

#### åŠŸèƒ½ç‰¹æ€§

- âœ… ç²¾è‹±ç‰¹æ®Šæ”»å‡»ï¼ˆç«ç„°åæ¯ã€è¿é”é—ªç”µã€æ—‹é£æ–©ï¼‰
- âœ… Bosså¤šé˜¶æ®µAIï¼ˆP1/P2/P3è‡ªåŠ¨è½¬æ¢ï¼‰
- âœ… æ•Œäººåä½œç³»ç»Ÿï¼ˆå‘¼å«é™„è¿‘ç›Ÿå‹ï¼‰
- âœ… æ ¼æŒ¡/é—ªé¿ååº”ï¼ˆç²¾è‹±/Bossæ›´é«˜å‡ ç‡ï¼‰

#### AIè¡Œä¸º

```javascript
// ç²¾è‹±æ•Œäººç‰¹æ®Šæ”»å‡»
updateEliteAttack(enemy, 'fire_breath', distance, time) {
    // ç«ç„°åæ¯ï¼šé”¥å½¢AOEä¼¤å®³
}

// Bosså¤šé˜¶æ®µ
updateBossAI(boss, distance, time) {
    const hpPercent = boss.hp / boss.maxHp;
    if (hpPercent < 0.33) {
        boss.phase = 3; // æš´æ€’é˜¶æ®µ
    }
}

// æ•Œäººåä½œ
callForHelp(enemy) {
    // å‘¼å«é™„è¿‘ç›Ÿå‹åŠ å…¥æˆ˜æ–—
}
```

---

### 5. âš¡ æ­¦å™¨è¿æ‹›ç³»ç»Ÿ (WeaponComboSystem)

**æ–‡ä»¶**: `src/systems/WeaponComboSystem.js` (620è¡Œ)

#### åŠŸèƒ½ç‰¹æ€§

- âœ… æ­¦å™¨è¿æ‹›æ¨¡å¼ï¼ˆLLH, LHL, HLL, LLHH, LHLHï¼‰
- âœ… ç¯å¢ƒè¿æ‹›ï¼ˆæ’å¢™è¿é”ä¼¤å®³ï¼‰
- âœ… ç©ºä¸­è¿æ‹›ï¼ˆæµ®ç©º+ä¸‹ç ¸AOEï¼‰
- âœ… å®Œç¾è¿å‡»å¥–åŠ±ï¼ˆ10+è¿å‡»ï¼Œä¼¤å®³x1.5ï¼‰

#### è¿æ‹›ç¤ºä¾‹

```javascript
// è½»è½»é‡è¿æ‹› (LLH)
playerAttack('light'); // L
playerAttack('light'); // L
playerAttack('heavy'); // H â†’ è§¦å‘è¿å‡»ç»ˆç»“æŠ€ (1.5xä¼¤å®³)

// ç¯å¢ƒè¿æ‹›
hitEnemy(enemy, damage, velocity);
// æ•Œäººæ’å¢™ â†’ é¢å¤–1.5xä¼¤å®³ + çœ©æ™•500ms

// ç©ºä¸­è¿æ‹›
launchEnemy(enemy); // æµ®ç©º
airHit(enemy); // ä¿æŒæµ®ç©º
airHit(enemy); // ä¿æŒæµ®ç©º
slamAttack(enemy); // ä¸‹ç ¸AOE
```

---

### 6. ğŸŒŸ è£…å¤‡ç‰¹æ•ˆç³»ç»Ÿ (EquipmentEffects)

**æ–‡ä»¶**: `src/effects/EquipmentEffects.js` (å¢å¼ºç‰ˆ)

#### åŠŸèƒ½ç‰¹æ€§

- âœ… ä¼ å¥‡è£…å¤‡ç²’å­æ‹–å°¾ï¼ˆ20ä¸ªç²’å­èºæ—‹è¿åŠ¨ï¼‰
- âœ… å¥—è£…æ¿€æ´»ç‰¹æ•ˆï¼ˆå¤šè¾¹å½¢å…‰ç¯+å¥–åŠ±æ–‡å­—ï¼‰
- âœ… å…ƒç´ é™„é­”ç‰¹æ•ˆï¼ˆ6ç§å…ƒç´ ç²’å­ç¯ç»•ï¼‰
- âœ… ç¥å™¨å½©è™¹å…‰æŸ±ï¼ˆ6å±‚å…‰ç¯+æ˜Ÿå½¢ç²’å­ï¼‰

#### ç‰¹æ•ˆç±»å‹

```javascript
// ä¼ å¥‡æ‹–å°¾
createLegendaryTrail(equipment) {
    // 20ä¸ªèºæ—‹ç²’å­è·Ÿéšæ­¦å™¨
}

// å¥—è£…å¥–åŠ±
activateSetBonus(setName, pieces) {
    // 2ä»¶ï¼šå…‰ç¯
    // 4ä»¶ï¼šå…‰ç¯ + ç²’å­
    // 6ä»¶ï¼šæœ€å¤§ç‰¹æ•ˆ + ç‰¹æ®Šèƒ½åŠ›
}

// é™„é­”ç‰¹æ•ˆ
createEnchantEffect(element) {
    // ç«/å†°/é›·/æ¯’ç²’å­ç¯ç»•æ­¦å™¨
}

// ç¥å™¨å…‰æ•ˆ
createArtifactEffect(artifact) {
    // å½©è™¹å…‰æŸ± + å‘¼å¸åŠ¨ç”»
}
```

---

### 7. ğŸ“Š æ•°æ®åˆ†æç³»ç»Ÿ (CombatDataAnalyzer)

**æ–‡ä»¶**: `src/ui/CombatDataAnalyzer.js` (660è¡Œ)

#### åŠŸèƒ½ç‰¹æ€§

- âœ… ä¼¤å®³æ¥æºç»Ÿè®¡ï¼ˆå…ƒç´ /æŠ€èƒ½/è£…å¤‡ä¸‰ç»´åº¦ï¼‰
- âœ… ä¼¤å®³æ¥æºæ¡å½¢å›¾å¯è§†åŒ–
- âœ… æˆ˜æ–—æ—¥å¿—è®°å½•ï¼ˆæœ€å¤š100æ¡ï¼Œæ”¯æŒJSONå¯¼å‡ºï¼‰
- âœ… æ€§èƒ½æ•°æ®ç›‘æ§ï¼ˆFPSã€ç²’å­æ•°ã€å†…å­˜ï¼‰

#### APIç¤ºä¾‹

```javascript
// è®°å½•ä¼¤å®³
this.combatDataAnalyzer.recordDamage('elements', 'fire', 100);

// è·å–ä¼¤å®³ç»Ÿè®¡
const stats = this.combatDataAnalyzer.getDamageStats('elements');

// è·å–ä¸»è¦ä¼¤å®³æ¥æº
const topSources = this.combatDataAnalyzer.getTopDamageSources('elements', 3);

// æ·»åŠ æˆ˜æ–—æ—¥å¿—
this.combatDataAnalyzer.addCombatLogEntry('kill', { enemy: 'slime', xp: 15 });

// å¯¼å‡ºæˆ˜æ–—æ—¥å¿—
const jsonLog = this.combatDataAnalyzer.exportCombatLog();
```

---

### 8. ğŸ­ æ°›å›´å¢å¼ºç³»ç»Ÿ (CombatAtmosphereSystem)

**æ–‡ä»¶**: `src/systems/CombatAtmosphereSystem.js` (560è¡Œ)

#### åŠŸèƒ½ç‰¹æ€§

- âœ… æˆ˜æ–—éŸ³ä¹å¼ºåº¦åŠ¨æ€è°ƒæ•´
- âœ… ä½è¡€é‡å¿ƒè·³éŸ³æ•ˆï¼ˆè¡€é‡è¶Šä½å¿ƒè·³è¶Šå¿«ï¼‰
- âœ… ä½è¡€é‡çº¢å±è„‰å†²vignette
- âœ… å‡»æ€è¡€è¿¹æ®‹ç•™ï¼ˆ5åˆ†é’Ÿåè‡ªåŠ¨æ·¡åŒ–ï¼‰
- âœ… è¿å‡»ç²’å­é£æš´ï¼ˆ20+è¿å‡»è§¦å‘ï¼‰
- âœ… Bossæˆ˜ç¯å¢ƒç‰¹æ•ˆï¼ˆ5ç§ç¯å¢ƒè‰²+èƒŒæ™¯ç²’å­ï¼‰

#### æ°›å›´æ•ˆæœ

```javascript
// ä½è¡€é‡å¿ƒè·³
updateLowHealthEffects() {
    if (this.player.hp < 30) {
        this.playHeartbeat(60 - this.player.hp); // BPMéšè¡€é‡é™ä½è€Œå‡é«˜
        this.updateVignette(0.5 * (1 - this.player.hp / 30));
    }
}

// å‡»æ€è¡€è¿¹
createBloodStain(x, y, type) {
    // æ™®é€šæ•Œäººï¼šå°è¡€è¿¹ï¼ˆ1åˆ†é’Ÿæ¶ˆå¤±ï¼‰
    // ç²¾è‹±æ•Œäººï¼šä¸­è¡€è¿¹ï¼ˆ3åˆ†é’Ÿæ¶ˆå¤±ï¼‰
    // Bossï¼šå¤§è¡€è¿¹ï¼ˆæ°¸ä¹…ï¼‰
}

// è¿å‡»ç²’å­é£æš´
updateComboParticles(comboCount) {
    if (comboCount >= 20) {
        this.spawnParticleStorm(); // 40ä¸ªç²’å­/ç§’
    }
}
```

---

## é›†æˆæŒ‡å—

### åœ¨ GameScene ä¸­åˆå§‹åŒ–

```javascript
create() {
    // 1. éŸ³æ•ˆç³»ç»Ÿ
    this.combatAudioManager = new CombatAudioManager(this);

    // 2. ç›¸æœºç³»ç»Ÿ
    this.combatCameraSystem = new CombatCameraSystem(this);

    // 3. UIé¢æ¿
    this.combatStatsPanel = new CombatStatsPanel(this);
    this.combatDataAnalyzer = new CombatDataAnalyzer(this);

    // 4. AIç³»ç»Ÿ
    this.enemyAI = new EnemyAI(this, this.player);

    // 5. è¿æ‹›ç³»ç»Ÿ
    this.weaponComboSystem = new WeaponComboSystem(this);

    // 6. ç‰¹æ•ˆç³»ç»Ÿ
    this.equipmentEffects = new EquipmentEffects(this);
    this.combatParticles = new CombatParticles(this);
    this.elementEffects = new ElementEffects(this);

    // 7. æ°›å›´ç³»ç»Ÿ
    this.combatAtmosphereSystem = new CombatAtmosphereSystem(this);
}
```

### åœ¨ update() ä¸­æ›´æ–°

```javascript
update(time, delta) {
    // æ›´æ–°æ‰€æœ‰ç³»ç»Ÿ
    if (this.combatCameraSystem) {
        this.combatCameraSystem.update(time, delta);
    }

    if (this.enemyAI) {
        this.enemyAI.update(time, delta);
    }

    if (this.weaponComboSystem) {
        this.weaponComboSystem.update(time, delta);
    }

    if (this.combatAtmosphereSystem) {
        this.combatAtmosphereSystem.update(time, delta);
    }
}
```

### åœ¨æˆ˜æ–—é€»è¾‘ä¸­è°ƒç”¨

```javascript
// æ•Œäººå—ä¼¤æ—¶
hitEnemy(enemy, damage) {
    // æ’­æ”¾å…ƒç´ éŸ³æ•ˆ
    this.combatAudioManager.playElementSound('fire', damage);

    // ç›¸æœºéœ‡åŠ¨
    this.combatCameraSystem.shake('normal', 0.005, 100);

    // ç²’å­ç‰¹æ•ˆ
    this.elementEffects.applyFireEffect(enemy, damage);

    // è®°å½•æ•°æ®
    this.combatDataAnalyzer.recordDamage('elements', 'fire', damage);
}
```

---

## é…ç½®æ–‡ä»¶

### CombatConfig.js ä½ç½®

**æ–‡ä»¶**: `src/data/CombatConfig.js` (280è¡Œ)

### è°ƒæ•´å¹³è¡¡æ€§

```javascript
// ä¿®æ”¹è¿å‡»ä¼¤å®³å€æ•°
COMBO_CONFIG.damageBonusPerLevel = 0.2; // æ¯å±‚å¢åŠ 20%

// ä¿®æ”¹ç›¸æœºéœ‡åŠ¨å¼ºåº¦
CAMERA_CONFIG.shake.normal.intensity = 0.005;

// ä¿®æ”¹æ•ŒäººAIè¡Œä¸º
ENEMY_AI_CONFIG.aggroRange = 150;
ENEMY_AI_CONFIG.blockChance = 0.1;

// ä¿®æ”¹éŸ³æ•ˆéŸ³é‡
AUDIO_CONFIG.masterVolume = 0.5;
```

---

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. æ•Œäººä¸ç§»åŠ¨/ä¸æ”»å‡»

**ç—‡çŠ¶**: æ•Œäººç”Ÿæˆåé™æ­¢ä¸åŠ¨

**è§£å†³æ–¹æ¡ˆ**:
```javascript
// æ£€æŸ¥ç‰©ç†å±æ€§
enemy.body.setMaxVelocity(speed);
enemy.body.setDrag(100);
enemy.body.setAllowGravity(false);
```

#### 2. éŸ³æ•ˆä¸æ’­æ”¾

**ç—‡çŠ¶**: æˆ˜æ–—ä¸­æ²¡æœ‰å£°éŸ³

**è§£å†³æ–¹æ¡ˆ**:
```javascript
// æ£€æŸ¥AudioManageråˆå§‹åŒ–
if (!this.combatAudioManager) {
    console.error('CombatAudioManageræœªåˆå§‹åŒ–');
}

// æ£€æŸ¥Web Audio APIæ”¯æŒ
if (!window.AudioContext && !window.webkitAudioContext) {
    console.error('æµè§ˆå™¨ä¸æ”¯æŒWeb Audio API');
}
```

#### 3. PerformanceMonitor æŠ¥é”™

**ç—‡çŠ¶**: `Cannot read properties of null (reading 'cut')`

**è§£å†³æ–¹æ¡ˆ**:
```javascript
// å·²åœ¨v1.9.8ä¿®å¤ - ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
// Graphicså¯¹è±¡ä¸èƒ½æ·»åŠ åˆ°Containerä¸­
this.graphGraphics = this.scene.add.graphics();
// ä¸è¦: this.container.add(this.graphGraphics);
```

#### 4. Bossè¡€æ¡ä¸æ˜¾ç¤º

**ç—‡çŠ¶**: Bossæˆ˜æ–—æ—¶æ²¡æœ‰è¡€æ¡

**è§£å†³æ–¹æ¡ˆ**:
```javascript
// æ£€æŸ¥BossHealthBaråˆå§‹åŒ–
if (this.bossHealthBar) {
    this.bossHealthBar.detectBoss(enemy);
}
```

---

## æ€§èƒ½ä¼˜åŒ–

### ç²’å­ç³»ç»Ÿä¼˜åŒ–

```javascript
// LOD (Level of Detail) ç³»ç»Ÿ
const maxParticles = {
    low: 50,      // ä½è´¨é‡ï¼š50ä¸ªç²’å­
    medium: 150,  // ä¸­ç­‰è´¨é‡ï¼š150ä¸ªç²’å­
    high: 300     // é«˜è´¨é‡ï¼š300ä¸ªç²’å­
};

// æ ¹æ®FPSåŠ¨æ€è°ƒæ•´
if (fps < 40) {
    this.combatParticles.setLOD('low');
}
```

### å¯¹è±¡æ± ä½¿ç”¨

```javascript
// å¤ç”¨Graphicså¯¹è±¡
const graphics = this.objectPool.acquire('graphics');
graphics.clear();
// ä½¿ç”¨graphics...
this.objectPool.release(graphics);
```

### æ€§èƒ½ç›‘æ§

```javascript
// æŒ‰Pé”®æŸ¥çœ‹æ€§èƒ½é¢æ¿
// ç›‘æ§æŒ‡æ ‡ï¼š
// - FPSï¼ˆç›®æ ‡ï¼š60ï¼‰
// - ç²’å­æ•°é‡ï¼ˆç›®æ ‡ï¼š< 500ï¼‰
// - å†…å­˜ä½¿ç”¨ï¼ˆç›®æ ‡ï¼š< 100MBï¼‰
```

---

## å¿«æ·é”®å‚è€ƒ

### æ¸¸æˆå¿«æ·é”®

| æŒ‰é”® | åŠŸèƒ½ |
|------|------|
| **Space** | æ”»å‡» |
| **Shift** | åŠ å·ï¼ˆé‡å‡»ï¼‰ |
| **WASD** | ç§»åŠ¨ |
| **I** | ç‰©å“æ  |
| **C** | è£…å¤‡é¢æ¿ |
| **Q** | ä»»åŠ¡æ—¥å¿— |
| **P** | æ€§èƒ½ç›‘æ§ |
| **O** | æ•°æ®åˆ†æ |

### ç³»ç»Ÿå¿«æ·é”®

| æŒ‰é”® | åŠŸèƒ½ |
|------|------|
| **Shift+T** | åˆ‡æ¢å¤©æ°” |
| **Shift+H** | æ—¶é—´å¿«è¿›1å°æ—¶ |
| **F5** | å¿«é€Ÿä¿å­˜ |
| **F9** | å¿«é€ŸåŠ è½½ |

### è°ƒè¯•å¿«æ·é”® (US-043)

| æŒ‰é”® | åŠŸèƒ½ |
|------|------|
| **F4** | æµ‹è¯•éŸ³æ•ˆç³»ç»Ÿ |
| **Shift+F6** | åˆ‡æ¢æˆ˜æ–—ç»Ÿè®¡é¢æ¿ |
| **Shift+F7** | ç”Ÿæˆæµ‹è¯•ç²¾è‹±æ•Œäºº |
| **Shift+F8** | ç”Ÿæˆæµ‹è¯•Boss |
| **Shift+F10** | é‡ç½®æˆ˜æ–—åˆ†ææ•°æ® |

---

## ä»£ç ç¤ºä¾‹

### å®Œæ•´æˆ˜æ–—æµç¨‹

```javascript
// 1. ç©å®¶æ”»å‡»æ•Œäºº
function playerAttack(enemy) {
    // è®¡ç®—ä¼¤å®³
    const damage = calculateDamage();
    const isCrit = Math.random() < this.player.critChance;

    if (isCrit) {
        damage *= (1.5 + this.player.critDamage);
    }

    // åº”ç”¨ä¼¤å®³
    this.combatSystem.hitEnemy(enemy, damage);
}

// 2. CombatSystem.hitEnemy() æ–¹æ³•
hitEnemy(enemy, damage) {
    // æ’­æ”¾å…ƒç´ éŸ³æ•ˆ
    this.combatAudioManager.playElementSound('fire', damage);

    // ç›¸æœºéœ‡åŠ¨
    this.combatCameraSystem.shake(isCrit ? 'crit' : 'normal');

    // ç²’å­ç‰¹æ•ˆ
    this.elementEffects.applyFireEffect(enemy, damage);

    // ä¼¤å®³æ•°å­—
    this.enhancedDamageText.show(enemy.x, enemy.y, damage, isCrit ? 'crit' : 'normal');

    // è®°å½•æ•°æ®
    this.combatDataAnalyzer.recordDamage('elements', 'fire', damage);
    this.combatStatsPanel.recordDamage(damage, 'fire', isCrit);

    // è¿å‡»æ›´æ–°
    this.comboSystem.addHit();
    this.weaponComboSystem.recordAttack('light');

    // æ°›å›´æ•ˆæœ
    this.combatAtmosphereSystem.onEnemyHit(enemy);
}
```

---

## è´¡çŒ®è€…

- **Claude Code**: æ ¸å¿ƒå®ç°ï¼ˆ45ä¸ªç”¨æˆ·æ•…äº‹ï¼Œ~3,500è¡Œä»£ç ï¼‰
- **å·¦å‰‘å¹¿**: é¡¹ç›®æŒ‡å¯¼ã€éœ€æ±‚å®šä¹‰ã€æµ‹è¯•éªŒè¯

---

## è®¸å¯è¯

MIT License - è¯¦è§é¡¹ç›®æ ¹ç›®å½• LICENSE æ–‡ä»¶

---

**æœ€åæ›´æ–°**: 2026-02-04
**æ–‡æ¡£ç‰ˆæœ¬**: v1.9.8

æœ‰é—®é¢˜ï¼ŸæŸ¥çœ‹ [GitHub Issues](https://github.com/jgzuo/forest-quest-rpg/issues)
