# Milestone 5 æ‰§è¡Œæ”¯æŒæ–‡æ¡£

## å¿«é€Ÿå‚è€ƒ

### æ‰§è¡Œè®¡åˆ’ä½ç½®
```
docs/plans/2026-01-24-milestone-5-enhancement.md
```

### Iteration 1 å¿«é€Ÿå‘½ä»¤

#### Task 1.1: åˆ†æå½“å‰å®ç°
```bash
# æ£€æŸ¥gainXPæ–¹æ³•
grep -A 20 "gainXP" src/scenes/GameScene.js

# æ£€æŸ¥autoSaveæ–¹æ³•
grep -A 15 "autoSave" src/utils/SaveManager.js

# æŸ¥çœ‹æµ‹è¯•ä»£ç 
sed -n '133,156p' tests/save-load.spec.js
```

#### Task 1.2: åˆ›å»ºè¯Šæ–­æµ‹è¯•
```bash
# åˆ›å»ºæµ‹è¯•æ–‡ä»¶
cat > tests/debug-autosave.spec.js << 'EOF'
// (ä»è®¡åˆ’æ–‡æ¡£å¤åˆ¶ä»£ç )
EOF

# è¿è¡Œè¯Šæ–­æµ‹è¯•
npx playwright test tests/debug-autosave.spec.js --headed
```

#### Task 1.3: ä¿®å¤ä»£ç 
```bash
# ç¼–è¾‘ GameScene.js
# åœ¨ gainXP æ–¹æ³•çš„å‡çº§é€»è¾‘ä¸­æ·»åŠ ï¼š
if (this.saveManager) {
    console.log('ğŸ’¾ [Level Up] Triggering auto-save...');
    this.saveManager.autoSave();
}

# æäº¤æ›´æ”¹
git add src/scenes/GameScene.js src/utils/SaveManager.js
git commit -m "fix: add auto-save on level up"
```

#### Task 1.4: éªŒè¯ä¿®å¤
```bash
# è¿è¡Œæµ‹è¯•
npx playwright test tests/save-load.spec.js:133 --headed

# é¢„æœŸç»“æœï¼šæµ‹è¯•é€šè¿‡
```

---

## å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: æµ‹è¯•è¶…æ—¶
**ç°è±¡**: æµ‹è¯•è¿è¡Œå¾ˆä¹…ä¸ç»“æŸ
**è§£å†³**:
```bash
# æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ
lsof -ti:8080

# å¦‚æœæ²¡æœ‰ï¼Œå¯åŠ¨æœåŠ¡å™¨
python3 -m http.server 8080
```

### é—®é¢˜2: æ‰¾ä¸åˆ°æ–‡ä»¶
**ç°è±¡**: "Cannot find module" æˆ– "ENOENT"
**è§£å†³**:
```bash
# ç¡®è®¤åœ¨æ­£ç¡®ç›®å½•
pwd
# åº”è¯¥æ˜¾ç¤º: /Users/zuojg/Downloads/AI/Code/forest-quest-rpg

# å¦‚æœä¸å¯¹ï¼Œåˆ‡æ¢ç›®å½•
cd /Users/zuojg/Downloads/AI/Code/forest-quest-rpg
```

### é—®é¢˜3: Gitæäº¤å¤±è´¥
**ç°è±¡**: "nothing to commit" æˆ–å…¶ä»–gité”™è¯¯
**è§£å†³**:
```bash
# æ£€æŸ¥çŠ¶æ€
git status

# å¦‚æœæ˜¾ç¤ºæœªè·Ÿè¸ªï¼Œä½¿ç”¨git add
git add <files>

# å¦‚æœæ˜¾ç¤ºæœªæš‚å­˜ï¼Œä½¿ç”¨git commit
git commit -m "message"
```

### é—®é¢˜4: æµ‹è¯•ä»ç„¶å¤±è´¥
**ç°è±¡**: ä¿®å¤åæµ‹è¯•è¿˜æ˜¯å¤±è´¥
**è§£å†³**:
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—
2. ç¡®è®¤ä»£ç ç¡®å®è¢«ä¿®æ”¹äº†
3. ç¡®è®¤æœåŠ¡å™¨é‡å¯äº†
4. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
```bash
# æ¸…é™¤Playwrightç¼“å­˜
npx playwright test --clear-cache
```

---

## è¿›åº¦æ£€æŸ¥ç‚¹

### Iteration 1 å®Œæˆæ ‡å‡†
- [ ] Task 1.1: åˆ†æä»£ç å®Œæˆ
- [ ] Task 1.2: è¯Šæ–­æµ‹è¯•åˆ›å»ºå¹¶è¿è¡Œ
- [ ] Task 1.3: auto-saveè°ƒç”¨å·²æ·»åŠ 
- [ ] Task 1.4: æµ‹è¯•é€šè¿‡
- [ ] ä»£ç å·²æäº¤
- [ ] è¿­ä»£æŠ¥å‘Šå·²åˆ›å»º

### éªŒè¯Iteration 1å®Œæˆ
```bash
# æ£€æŸ¥gitæ—¥å¿—
git log --oneline -3

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š
# abc1234 fix: add auto-save on level up
# 8744f31 feat: complete Milestone 4...

# è¿è¡Œæµ‹è¯•
npm test tests/save-load.spec.js

# åº”è¯¥çœ‹åˆ°ï¼š
# âœ“ å‡çº§ååº”è¯¥è‡ªåŠ¨ä¿å­˜
```

---

## è¿”å›ä¸»ä¼šè¯æ—¶çš„æŠ¥å‘Šæ ¼å¼

å®Œæˆè¿­ä»£åï¼Œè¯·åœ¨ä¸»ä¼šè¯ä¸­è¿™æ ·æŠ¥å‘Šï¼š

```
å·²å®ŒæˆIteration 1ï¼

æ‰§è¡Œå†…å®¹ï¼š
1. æ·»åŠ äº†auto-saveè°ƒç”¨åˆ°gainXPæ–¹æ³•
2. åˆ›å»ºäº†è¯Šæ–­æµ‹è¯•
3. æµ‹è¯•é€šè¿‡æƒ…å†µï¼š[é€šè¿‡/å¤±è´¥]

Gitæäº¤ï¼š
- Commit hash: [abc1234]
- Commit message: "[ä¿¡æ¯]"

é‡åˆ°çš„é—®é¢˜ï¼š
[å¦‚æœæœ‰ï¼Œæè¿°é—®é¢˜]

ä¸‹ä¸€æ­¥ï¼š
å‡†å¤‡æ‰§è¡ŒIteration 2
```

---

## éœ€è¦å¸®åŠ©æ—¶çš„ä¿¡æ¯æ”¶é›†

å¦‚æœåœ¨æ‰§è¡Œä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·æ”¶é›†ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **é”™è¯¯ä¿¡æ¯**
```bash
# å¤åˆ¶å®Œæ•´çš„é”™è¯¯å †æ ˆ
```

2. **å½“å‰æ­¥éª¤**
- æ­£åœ¨æ‰§è¡Œå“ªä¸ªTaskï¼Ÿï¼ˆå¦‚ Task 1.3ï¼‰
- æ­£åœ¨æ‰§è¡Œå“ªæ¡å‘½ä»¤ï¼Ÿ

3. **ç¯å¢ƒä¿¡æ¯**
```bash
# å½“å‰ç›®å½•
pwd

# GitçŠ¶æ€
git status

# æœ€è¿‘æäº¤
git log --oneline -3
```

4. **æµ‹è¯•ç»“æœ**
```bash
# æµ‹è¯•è¾“å‡º
npm test [test-file] > test-output.log 2>&1
cat test-output.log
```

---

## æˆåŠŸæ ‡å¿—

### Iteration 1 æˆåŠŸ âœ…
```
âœ… ä»£ç ä¿®æ”¹å®Œæˆ
âœ… æµ‹è¯•é€šè¿‡ï¼šå‡çº§ååº”è¯¥è‡ªåŠ¨ä¿å­˜
âœ… Gitæäº¤å®Œæˆ
âœ… è¿­ä»£æŠ¥å‘Šå·²åˆ›å»º
âœ… æµ‹è¯•é€šè¿‡ç‡æå‡åˆ° 29/38 (76.3%)
```

### Iteration 2 æˆåŠŸ âœ…
```
âœ… ä»£ç ä¿®æ”¹å®Œæˆ
âœ… æµ‹è¯•é€šè¿‡ï¼šåœºæ™¯åˆ‡æ¢ååº”è¯¥è‡ªåŠ¨ä¿å­˜
âœ… Gitæäº¤å®Œæˆ
âœ… è¿­ä»£æŠ¥å‘Šå·²åˆ›å»º
âœ… æµ‹è¯•é€šè¿‡ç‡æå‡åˆ° 30/38 (78.9%)
```

### Iteration 3 æˆåŠŸ âœ…
```
âœ… ä»£ç ä¿®æ”¹å®Œæˆ
âœ… æµ‹è¯•é€šè¿‡ï¼šå­˜æ¡£åº”è¯¥åŒ…å«æ‰€æœ‰å…³é”®æ•°æ®
âœ… Gitæäº¤å®Œæˆ
âœ… è¿­ä»£æŠ¥å‘Šå·²åˆ›å»º
âœ… æµ‹è¯•é€šè¿‡ç‡æå‡åˆ° 31/38 (81.6%)
```

### Iteration 4 æˆåŠŸ âœ…
```
âœ… æµ‹è¯•æ–¹æ³•æ”¹è¿›å®Œæˆ
âœ… æµ‹è¯•é€šè¿‡ç‡æå‡åˆ° > 84%
âœ… Gitæäº¤å®Œæˆ
âœ… è¿­ä»£æŠ¥å‘Šå·²åˆ›å»º
âœ… Phase 1 (Bugä¿®å¤) å®Œæˆï¼
```

---

## ä¿æŒå·¥ä½œåŒæ­¥

### å®šæœŸæäº¤
æ¯å®Œæˆ1-2ä¸ªä»»åŠ¡å°±æäº¤ä¸€æ¬¡ï¼Œä¸è¦ç­‰åˆ°æ‰€æœ‰å®Œæˆ

```bash
git add <files>
git commit -m "progress: [å…·ä½“åšäº†ä»€ä¹ˆ]"
```

### åˆ›å»ºå·¥ä½œåˆ†æ”¯ï¼ˆå¯é€‰ï¼‰
å¦‚æœæƒ³ä¿æŒmainå¹²å‡€ï¼š

```bash
git checkout -b milestone-5
git push -u origin milestone-5

# å®Œæˆååˆå¹¶å›main
git checkout main
git merge milestone-5
```

---

## å®Œæˆåæ¨é€åˆ°GitHub

### æ‰€æœ‰è¿­ä»£å®Œæˆå
```bash
# 1. æ‹‰å–æœ€æ–°æ›´æ”¹
git pull origin main

# 2. æ¨é€æ‰€æœ‰æäº¤
git push origin main

# 3. åœ¨ä¸»ä¼šè¯ä¸­å‘Šè¯‰æˆ‘å®Œæˆæƒ…å†µ
```

---

**ç¥æ‰§è¡Œé¡ºåˆ©ï¼** ğŸš€

éœ€è¦å¸®åŠ©æ—¶éšæ—¶è¿”å›ä¸»ä¼šè¯ã€‚
